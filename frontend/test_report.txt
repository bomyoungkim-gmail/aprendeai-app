PASS tests/unit/lib/constants/enums.spec.ts
PASS tests/unit/components/GameStatsCard.spec.tsx
PASS tests/unit/services/highlights.service.spec.ts
PASS tests/unit/api/content.api.spec.ts
PASS tests/unit/lib/offline-features.spec.ts
  ‚óè Console

    console.log
      üì• Queued operation: CREATE

      at OfflineQueueClass.log (lib/cornell/offline-queue.ts:57:13)

    console.log
      üì• Queued operation: CREATE

      at OfflineQueueClass.log (lib/cornell/offline-queue.ts:57:13)

    console.log
      üì• Queued operation: CREATE

      at OfflineQueueClass.log (lib/cornell/offline-queue.ts:57:13)

    console.log
      üì• Queued operation: CREATE

      at OfflineQueueClass.log (lib/cornell/offline-queue.ts:57:13)

    console.log
      üì§ Processing 1 queued operations

      at OfflineQueueClass.log [as processQueue] (lib/cornell/offline-queue.ts:73:13)

    console.log
      ‚úÖ Processed: CREATE

      at OfflineQueueClass.log [as processQueue] (lib/cornell/offline-queue.ts:81:17)

    console.log
      üì• Queued operation: CREATE

      at OfflineQueueClass.log (lib/cornell/offline-queue.ts:57:13)

    console.log
      üì§ Processing 1 queued operations

      at OfflineQueueClass.log [as processQueue] (lib/cornell/offline-queue.ts:73:13)

    console.error
      ‚ùå Failed to process: CREATE Error: Network error
          at Object.<anonymous> (C:\projects\aprendeai-app\frontend\tests\unit\lib\offline-features.spec.ts:73:50)
          at Promise.finally.completed (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
          at _callCircusTest (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
          at C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:849:7
          at _runTestsForDescribeBlock (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
          at _runTestsForDescribeBlock (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
          at run (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
          at runAndTransformResultsToJestFormat (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
          at jestAdapter (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\runner.js:101:19)
          at runTestInternal (C:\projects\aprendeai-app\frontend\node_modules\jest-runner\build\testWorker.js:275:16)
          at runTest (C:\projects\aprendeai-app\frontend\node_modules\jest-runner\build\testWorker.js:343:7)
          at Object.worker (C:\projects\aprendeai-app\frontend\node_modules\jest-runner\build\testWorker.js:497:12)

      81 |         console.log('‚úÖ Processed:', op.type);
      82 |       } catch (err) {
    > 83 |         console.error('‚ùå Failed to process:', op.type, err);
         |                 ^
      84 |         
      85 |         // Increment retries
      86 |         const index = this.queue.findIndex((o) => o.id === op.id);

      at OfflineQueueClass.error [as processQueue] (lib/cornell/offline-queue.ts:83:17)
      at Object.<anonymous> (tests/unit/lib/offline-features.spec.ts:75:5)

    console.log
      üì• Queued operation: CREATE

      at OfflineQueueClass.log (lib/cornell/offline-queue.ts:57:13)

    console.log
      üì§ Processing 1 queued operations

      at OfflineQueueClass.log [as processQueue] (lib/cornell/offline-queue.ts:73:13)

    console.error
      ‚ùå Failed to process: CREATE Error: Permanent error
          at Object.<anonymous> (C:\projects\aprendeai-app\frontend\tests\unit\lib\offline-features.spec.ts:97:50)
          at Promise.finally.completed (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
          at _callCircusTest (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
          at C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:849:7
          at _runTestsForDescribeBlock (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
          at _runTestsForDescribeBlock (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
          at run (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
          at runAndTransformResultsToJestFormat (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
          at jestAdapter (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\runner.js:101:19)
          at runTestInternal (C:\projects\aprendeai-app\frontend\node_modules\jest-runner\build\testWorker.js:275:16)
          at runTest (C:\projects\aprendeai-app\frontend\node_modules\jest-runner\build\testWorker.js:343:7)
          at Object.worker (C:\projects\aprendeai-app\frontend\node_modules\jest-runner\build\testWorker.js:497:12)

      81 |         console.log('‚úÖ Processed:', op.type);
      82 |       } catch (err) {
    > 83 |         console.error('‚ùå Failed to process:', op.type, err);
         |                 ^
      84 |         
      85 |         // Increment retries
      86 |         const index = this.queue.findIndex((o) => o.id === op.id);

      at OfflineQueueClass.error [as processQueue] (lib/cornell/offline-queue.ts:83:17)
      at Object.<anonymous> (tests/unit/lib/offline-features.spec.ts:99:5)

    console.warn
      ‚ùå Max retries exceeded, removing: 1766863779008-gg11j9wcv

      90 |           // Remove if max retries exceeded
      91 |           if (this.queue[index].retries > MAX_RETRIES) {
    > 92 |             console.warn('‚ùå Max retries exceeded, removing:', op.id);
         |                     ^
      93 |             this.remove(op.id);
      94 |           } else {
      95 |             this.saveQueue();

      at OfflineQueueClass.warn [as processQueue] (lib/cornell/offline-queue.ts:92:21)
      at Object.<anonymous> (tests/unit/lib/offline-features.spec.ts:99:5)

    console.log
      üî¥ Went offline

      at log (hooks/use-online-status.ts:21:15)

    console.log
      üî¥ Went offline

      at log (hooks/use-online-status.ts:21:15)

    console.log
      üü¢ Back online

      at log (hooks/use-online-status.ts:16:15)

PASS tests/unit/services/websocket.service.spec.ts
  ‚óè Console

    console.warn
      [WebSocket] No auth token, skipping connection

      42 |     const token = storageService.get('authToken');
      43 |     if (!token) {
    > 44 |       console.warn('[WebSocket] No auth token, skipping connection');
         |               ^
      45 |       return;
      46 |     }
      47 |

      at WebSocketService.warn [as initialize] (services/websocket/websocket.service.ts:44:15)
      at Object.initialize (tests/unit/services/websocket.service.spec.ts:72:24)

    console.warn
      [WebSocket] Already initialized

      36 |   initialize(config: WebSocketConfig) {
      37 |     if (this.socket) {
    > 38 |       console.warn('[WebSocket] Already initialized');
         |               ^
      39 |       return;
      40 |     }
      41 |

      at WebSocketService.warn [as initialize] (services/websocket/websocket.service.ts:38:15)
      at Object.initialize (tests/unit/services/websocket.service.spec.ts:85:24)

    console.log
      [WebSocket] Joining session: session-123

      at WebSocketService.log [as joinSession] (services/websocket/websocket.service.ts:138:13)

    console.warn
      [WebSocket] Already connected

      109 |
      110 |     if (this.socket.connected) {
    > 111 |       console.warn('[WebSocket] Already connected');
          |               ^
      112 |       return;
      113 |     }
      114 |

      at WebSocketService.warn [as connect] (services/websocket/websocket.service.ts:111:15)
      at WebSocketService.connect [as initialize] (services/websocket/websocket.service.ts:58:12)
      at Object.initialize (tests/unit/services/websocket.service.spec.ts:119:24)

    console.log
      [WebSocket] Leaving session: session-123

      at WebSocketService.log [as leaveSession] (services/websocket/websocket.service.ts:151:13)

    console.warn
      [WebSocket] Already connected

      109 |
      110 |     if (this.socket.connected) {
    > 111 |       console.warn('[WebSocket] Already connected');
          |               ^
      112 |       return;
      113 |     }
      114 |

      at WebSocketService.warn [as connect] (services/websocket/websocket.service.ts:111:15)
      at WebSocketService.connect [as initialize] (services/websocket/websocket.service.ts:58:12)
      at Object.initialize (tests/unit/services/websocket.service.spec.ts:138:24)

    console.warn
      [WebSocket] Already connected

      109 |
      110 |     if (this.socket.connected) {
    > 111 |       console.warn('[WebSocket] Already connected');
          |               ^
      112 |       return;
      113 |     }
      114 |

      at WebSocketService.warn [as connect] (services/websocket/websocket.service.ts:111:15)
      at WebSocketService.connect [as initialize] (services/websocket/websocket.service.ts:58:12)
      at Object.initialize (tests/unit/services/websocket.service.spec.ts:138:24)

    console.warn
      [WebSocket] Already connected

      109 |
      110 |     if (this.socket.connected) {
    > 111 |       console.warn('[WebSocket] Already connected');
          |               ^
      112 |       return;
      113 |     }
      114 |

      at WebSocketService.warn [as connect] (services/websocket/websocket.service.ts:111:15)
      at WebSocketService.connect [as initialize] (services/websocket/websocket.service.ts:58:12)
      at Object.initialize (tests/unit/services/websocket.service.spec.ts:138:24)

PASS tests/unit/api/groups.api.spec.ts
PASS tests/unit/sanity.spec.ts
PASS tests/unit/api/sessions.api.spec.ts
PASS tests/unit/hooks/useGameAnimation.spec.ts
FAIL tests/unit/services/storage.service.spec.ts
  ‚óè Console

    console.error
      [Storage] Failed to set "authToken": Error: Quota exceeded
          at Object.localStorage.setItem (C:\projects\aprendeai-app\frontend\tests\unit\services\storage.service.spec.ts:192:15)
          at StorageService.setItem [as set] (C:\projects\aprendeai-app\frontend\services\storage\storage.service.ts:94:20)
          at set (C:\projects\aprendeai-app\frontend\tests\unit\services\storage.service.spec.ts:195:35)
          at Object.<anonymous> (C:\projects\aprendeai-app\frontend\node_modules\expect\build\index.js:1824:9)
          at Object.throwingMatcher [as toThrow] (C:\projects\aprendeai-app\frontend\node_modules\expect\build\index.js:2235:93)
          at Object.toThrow (C:\projects\aprendeai-app\frontend\tests\unit\services\storage.service.spec.ts:195:66)
          at Promise.finally.completed (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
          at _callCircusTest (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
          at C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:849:7
          at _runTestsForDescribeBlock (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
          at _runTestsForDescribeBlock (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
          at _runTestsForDescribeBlock (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
          at run (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
          at runAndTransformResultsToJestFormat (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
          at jestAdapter (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\runner.js:101:19)
          at runTestInternal (C:\projects\aprendeai-app\frontend\node_modules\jest-runner\build\testWorker.js:275:16)
          at runTest (C:\projects\aprendeai-app\frontend\node_modules\jest-runner\build\testWorker.js:343:7)
          at Object.worker (C:\projects\aprendeai-app\frontend\node_modules\jest-runner\build\testWorker.js:497:12)

      94 |       localStorage.setItem(key, serialized);
      95 |     } catch (error) {
    > 96 |       console.error(`[Storage] Failed to set "${key}":`, error);
         |               ^
      97 |     }
      98 |   }
      99 |

      at StorageService.error [as set] (services/storage/storage.service.ts:96:15)
      at set (tests/unit/services/storage.service.spec.ts:195:35)
      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)
      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)
      at Object.toThrow (tests/unit/services/storage.service.spec.ts:195:66)

    console.error
      [Storage] Failed to get "authToken": Error: Storage error
          at Object.localStorage.getItem (C:\projects\aprendeai-app\frontend\tests\unit\services\storage.service.spec.ts:204:15)
          at StorageService.getItem [as get] (C:\projects\aprendeai-app\frontend\services\storage\storage.service.ts:60:33)
          at Object.get (C:\projects\aprendeai-app\frontend\tests\unit\services\storage.service.spec.ts:207:37)
          at Promise.finally.completed (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
          at _callCircusTest (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
          at C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:849:7
          at _runTestsForDescribeBlock (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
          at _runTestsForDescribeBlock (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
          at _runTestsForDescribeBlock (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
          at run (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
          at runAndTransformResultsToJestFormat (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
          at jestAdapter (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\runner.js:101:19)
          at runTestInternal (C:\projects\aprendeai-app\frontend\node_modules\jest-runner\build\testWorker.js:275:16)
          at runTest (C:\projects\aprendeai-app\frontend\node_modules\jest-runner\build\testWorker.js:343:7)
          at Object.worker (C:\projects\aprendeai-app\frontend\node_modules\jest-runner\build\testWorker.js:497:12)

      71 |       }
      72 |     } catch (error) {
    > 73 |       console.error(`[Storage] Failed to get "${key}":`, error);
         |               ^
      74 |       return defaultValue ?? null;
      75 |     }
      76 |   }

      at StorageService.error [as get] (services/storage/storage.service.ts:73:15)
      at Object.get (tests/unit/services/storage.service.spec.ts:207:37)

  ‚óè StorageService ‚Ä∫ keys() ‚Ä∫ should return all keys

    expect(received).toContain(expected) // indexOf

    Expected value: "authToken"
    Received array: ["getItem", "setItem", "removeItem", "clear", "length", "key"]

      148 |       
      149 |       const keys = storageService.keys();
    > 150 |       expect(keys).toContain('authToken');
          |                    ^
      151 |       expect(keys).toContain('userId');
      152 |       expect(keys.length).toBe(2);
      153 |     });

      at Object.toContain (tests/unit/services/storage.service.spec.ts:150:20)

  ‚óè StorageService ‚Ä∫ keys() ‚Ä∫ should return empty array when storage is empty

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 8

    - Array []
    + Array [
    +   "getItem",
    +   "setItem",
    +   "removeItem",
    +   "clear",
    +   "length",
    +   "key",
    + ]

      155 |     it('should return empty array when storage is empty', () => {
      156 |       const keys = storageService.keys();
    > 157 |       expect(keys).toEqual([]);
          |                    ^
      158 |     });
      159 |   });
      160 |

      at Object.toEqual (tests/unit/services/storage.service.spec.ts:157:20)

PASS tests/unit/services/content.service.spec.ts
  ‚óè Console

    console.error
      [ContentService] Failed to fetch contents: Error: Network error
          at Object.<anonymous> (C:\projects\aprendeai-app\frontend\tests\unit\services\content.service.spec.ts:42:21)
          at Promise.finally.completed (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
          at _callCircusTest (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
          at C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:849:7
          at _runTestsForDescribeBlock (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
          at _runTestsForDescribeBlock (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
          at _runTestsForDescribeBlock (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
          at run (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
          at runAndTransformResultsToJestFormat (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
          at jestAdapter (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\runner.js:101:19)
          at runTestInternal (C:\projects\aprendeai-app\frontend\node_modules\jest-runner\build\testWorker.js:275:16)
          at runTest (C:\projects\aprendeai-app\frontend\node_modules\jest-runner\build\testWorker.js:343:7)
          at Object.worker (C:\projects\aprendeai-app\frontend\node_modules\jest-runner\build\testWorker.js:497:12)

      22 |       return contents;
      23 |     } catch (error) {
    > 24 |       console.error('[ContentService] Failed to fetch contents:', error);
         |               ^
      25 |       throw error;
      26 |     }
      27 |   },

      at Object.error [as fetchAll] (services/content/content.service.ts:24:15)
      at Object.<anonymous> (tests/unit/services/content.service.spec.ts:45:7)

    console.error
      [ContentService] Failed to fetch content 999: Error: Not found
          at Object.<anonymous> (C:\projects\aprendeai-app\frontend\tests\unit\services\content.service.spec.ts:66:62)
          at Promise.finally.completed (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
          at _callCircusTest (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
          at C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:849:7
          at _runTestsForDescribeBlock (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
          at _runTestsForDescribeBlock (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
          at _runTestsForDescribeBlock (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
          at run (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
          at runAndTransformResultsToJestFormat (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
          at jestAdapter (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\runner.js:101:19)
          at runTestInternal (C:\projects\aprendeai-app\frontend\node_modules\jest-runner\build\testWorker.js:275:16)
          at runTest (C:\projects\aprendeai-app\frontend\node_modules\jest-runner\build\testWorker.js:343:7)
          at Object.worker (C:\projects\aprendeai-app\frontend\node_modules\jest-runner\build\testWorker.js:497:12)

      39 |       return content;
      40 |     } catch (error) {
    > 41 |       console.error(`[ContentService] Failed to fetch content ${id}:`, error);
         |               ^
      42 |       throw error;
      43 |     }
      44 |   },

      at Object.error [as fetchById] (services/content/content.service.ts:41:15)
      at Object.<anonymous> (tests/unit/services/content.service.spec.ts:68:7)

    console.error
      [ContentService] Failed to create content: Error: API Error
          at Object.<anonymous> (C:\projects\aprendeai-app\frontend\tests\unit\services\content.service.spec.ts:91:65)
          at Promise.finally.completed (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
          at _callCircusTest (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
          at C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:849:7
          at _runTestsForDescribeBlock (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
          at _runTestsForDescribeBlock (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
          at _runTestsForDescribeBlock (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
          at run (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
          at runAndTransformResultsToJestFormat (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
          at jestAdapter (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\runner.js:101:19)
          at runTestInternal (C:\projects\aprendeai-app\frontend\node_modules\jest-runner\build\testWorker.js:275:16)
          at runTest (C:\projects\aprendeai-app\frontend\node_modules\jest-runner\build\testWorker.js:343:7)
          at Object.worker (C:\projects\aprendeai-app\frontend\node_modules\jest-runner\build\testWorker.js:497:12)

      57 |       return newContent;
      58 |     } catch (error) {
    > 59 |       console.error('[ContentService] Failed to create content:', error);
         |               ^
      60 |       throw error;
      61 |     }
      62 |   },

      at Object.error [as create] (services/content/content.service.ts:59:15)
      at Object.<anonymous> (tests/unit/services/content.service.spec.ts:93:7)

    console.error
      [ContentService] Failed to update content 1: Error: Update failed
          at Object.<anonymous> (C:\projects\aprendeai-app\frontend\tests\unit\services\content.service.spec.ts:116:65)
          at Promise.finally.completed (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
          at _callCircusTest (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
          at C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:849:7
          at _runTestsForDescribeBlock (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
          at _runTestsForDescribeBlock (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
          at _runTestsForDescribeBlock (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
          at run (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
          at runAndTransformResultsToJestFormat (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
          at jestAdapter (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\runner.js:101:19)
          at runTestInternal (C:\projects\aprendeai-app\frontend\node_modules\jest-runner\build\testWorker.js:275:16)
          at runTest (C:\projects\aprendeai-app\frontend\node_modules\jest-runner\build\testWorker.js:343:7)
          at Object.worker (C:\projects\aprendeai-app\frontend\node_modules\jest-runner\build\testWorker.js:497:12)

      74 |       return updated;
      75 |     } catch (error) {
    > 76 |       console.error(`[ContentService] Failed to update content ${id}:`, error);
         |               ^
      77 |       throw error;
      78 |     }
      79 |   },

      at Object.error [as update] (services/content/content.service.ts:76:15)
      at Object.<anonymous> (tests/unit/services/content.service.spec.ts:118:7)

    console.error
      [ContentService] Failed to delete content 1: Error: Delete failed
          at Object.<anonymous> (C:\projects\aprendeai-app\frontend\tests\unit\services\content.service.spec.ts:137:65)
          at Promise.finally.completed (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
          at _callCircusTest (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at _runTest (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
          at C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:849:7
          at _runTestsForDescribeBlock (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
          at _runTestsForDescribeBlock (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
          at _runTestsForDescribeBlock (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
          at run (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
          at runAndTransformResultsToJestFormat (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
          at jestAdapter (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\runner.js:101:19)
          at runTestInternal (C:\projects\aprendeai-app\frontend\node_modules\jest-runner\build\testWorker.js:275:16)
          at runTest (C:\projects\aprendeai-app\frontend\node_modules\jest-runner\build\testWorker.js:343:7)
          at Object.worker (C:\projects\aprendeai-app\frontend\node_modules\jest-runner\build\testWorker.js:497:12)

      90 |       await contentApi.deleteContent(id);
      91 |     } catch (error) {
    > 92 |       console.error(`[ContentService] Failed to delete content ${id}:`, error);
         |               ^
      93 |       throw error;
      94 |     }
      95 |   },

      at Object.error [as delete] (services/content/content.service.ts:92:15)
      at Object.<anonymous> (tests/unit/services/content.service.spec.ts:139:7)

PASS tests/unit/components/StarsPerGameChart.spec.tsx
PASS tests/unit/components/GameDashboard.spec.tsx
PASS tests/unit/components/cornell-components.spec.tsx
PASS tests/unit/CornellLayout.spec.tsx
PASS tests/unit/components/Leaderboard.spec.tsx
FAIL tests/unit/components/ui/Skeleton.spec.tsx
  ‚óè Skeleton ‚Ä∫ Rendering ‚Ä∫ should have rounded class

    expect(element).toHaveClass("rounded-md")

    Expected the element to have class:
      rounded-md
    Received:
      animate-pulse bg-gray-200 rounded

      27 |       const { container } = render(<Skeleton />);
      28 |       const skeleton = container.firstChild as HTMLElement;
    > 29 |       expect(skeleton).toHaveClass('rounded-md');
         |                        ^
      30 |     });
      31 |
      32 |     it('should have background color class', () => {

      at Object.toHaveClass (tests/unit/components/ui/Skeleton.spec.tsx:29:24)

  ‚óè Skeleton ‚Ä∫ Rendering ‚Ä∫ should have background color class

    expect(element).toHaveClass("bg-muted")

    Expected the element to have class:
      bg-muted
    Received:
      animate-pulse bg-gray-200 rounded

      33 |       const { container } = render(<Skeleton />);
      34 |       const skeleton = container.firstChild as HTMLElement;
    > 35 |       expect(skeleton).toHaveClass('bg-muted');
         |                        ^
      36 |     });
      37 |   });
      38 |

      at Object.toHaveClass (tests/unit/components/ui/Skeleton.spec.tsx:35:24)

FAIL tests/unit/hooks/use-content.spec.ts
  ‚óè Test suite failed to run


      x Expected '>', got 'client'
        ,-[C:\projects\aprendeai-app\frontend\tests\unit\hooks\use-content.spec.ts:31:1]
     31 |   });
     32 | 
     33 |   const Wrapper = ({ children }: { children: React.ReactNode }) => (
     34 |     <QueryClientProvider client={queryClient}>{children}</QueryClientProvider>
        :                          ^^^^^^
     35 |   );
     36 | 
     36 |   return Wrapper;
        `----


    Caused by:
        Syntax Error

      at Object.transformSync (node_modules/next/src/build/swc/index.ts:1434:25)
      at transformSync (node_modules/next/src/build/swc/index.ts:1551:19)
      at Object.process (node_modules/next/src/build/swc/jest-transformer.ts:104:25)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/index.js:422:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/index.js:519:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/index.js:558:19)

PASS tests/unit/hooks/cornell/use-autosave.spec.ts
  ‚óè Console

    console.error
      Warning: An update to TestComponent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at TestComponent (C:\projects\aprendeai-app\frontend\node_modules\@testing-library\react\dist\pure.js:328:5)

      47 |         await onSave(data);
      48 |
    > 49 |         setStatus('saved');
         |         ^
      50 |         setLastSaved(new Date());
      51 |         onSuccess?.();
      52 |

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27628:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25547:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:16708:7)
      at setStatus (hooks/cornell/use-autosave.ts:49:9)

    console.error
      Warning: An update to TestComponent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at TestComponent (C:\projects\aprendeai-app\frontend\node_modules\@testing-library\react\dist\pure.js:328:5)

      48 |
      49 |         setStatus('saved');
    > 50 |         setLastSaved(new Date());
         |         ^
      51 |         onSuccess?.();
      52 |
      53 |         // If there's pending data, save it now

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27628:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25547:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:16708:7)
      at setLastSaved (hooks/cornell/use-autosave.ts:50:9)

    console.error
      Autosave failed: Error: Save failed
          at Object.<anonymous> (C:\projects\aprendeai-app\frontend\tests\unit\hooks\cornell\use-autosave.spec.ts:72:48)
          at Promise.finally.completed (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1557:28)
          at new Promise (<anonymous>)
          at callAsyncCircusFn (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1497:10)
          at _callCircusTest (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1007:40)
          at _runTest (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:947:3)
          at C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:849:7
          at _runTestsForDescribeBlock (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:862:11)
          at _runTestsForDescribeBlock (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:857:11)
          at run (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:761:3)
          at runAndTransformResultsToJestFormat (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\jestAdapterInit.js:1918:21)
          at jestAdapter (C:\projects\aprendeai-app\frontend\node_modules\jest-circus\build\runner.js:101:19)
          at runTestInternal (C:\projects\aprendeai-app\frontend\node_modules\jest-runner\build\testWorker.js:275:16)
          at runTest (C:\projects\aprendeai-app\frontend\node_modules\jest-runner\build\testWorker.js:343:7)
          at Object.worker (C:\projects\aprendeai-app\frontend\node_modules\jest-runner\build\testWorker.js:497:12)

      58 |         }
      59 |       } catch (error) {
    > 60 |         console.error('Autosave failed:', error);
         |                 ^
      61 |         setStatus('error');
      62 |         onError?.(error as Error);
      63 |       } finally {

      at Object.error [as saveNow] (hooks/cornell/use-autosave.ts:60:17)
      at tests/unit/hooks/cornell/use-autosave.spec.ts:79:7

PASS tests/unit/components/ui/Button.spec.tsx
PASS tests/unit/lib/env.spec.ts
  ‚óè Console

    console.log
      [env] Loaded environment variables: {
        API_URL: 'http://localhost:4000',
        WS_URL: 'not set',
        NODE_ENV: 'development'
      }

      at Object.log (lib/config/env.ts:81:11)

PASS tests/unit/components/ui/Toast.spec.tsx
PASS tests/unit/PromptDrawer.spec.tsx
PASS tests/unit/hooks/useGameProgress.spec.ts
  ‚óè Console

    console.error
      Warning: An update to TestComponent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at TestComponent (C:\projects\aprendeai-app\frontend\node_modules\@testing-library\react\dist\pure.js:328:5)

      29 |   const fetchProgress = useCallback(async () => {
      30 |     try {
    > 31 |       setLoading(true);
         |       ^
      32 |       const response = await fetch('/api/games/progress');
      33 |       
      34 |       if (!response.ok) {

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27628:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25547:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:16708:7)
      at setLoading (hooks/games/use-game-progress.ts:31:7)
      at Object.fetchProgress [as refetch] (hooks/games/use-game-progress.ts:54:12)
      at Object.refetch (tests/unit/hooks/useGameProgress.spec.ts:56:26)

    console.error
      Warning: An update to TestComponent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at TestComponent (C:\projects\aprendeai-app\frontend\node_modules\@testing-library\react\dist\pure.js:328:5)

      37 |       
      38 |       const data = await response.json();
    > 39 |       setProgress(data);
         |       ^
      40 |       setError(null);
      41 |     } catch (err) {
      42 |       setError(err as Error);

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27628:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25547:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:16708:7)
      at setProgress (hooks/games/use-game-progress.ts:39:7)
      at Object.<anonymous> (tests/unit/hooks/useGameProgress.spec.ts:56:5)

    console.error
      Warning: An update to TestComponent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at TestComponent (C:\projects\aprendeai-app\frontend\node_modules\@testing-library\react\dist\pure.js:328:5)

      38 |       const data = await response.json();
      39 |       setProgress(data);
    > 40 |       setError(null);
         |       ^
      41 |     } catch (err) {
      42 |       setError(err as Error);
      43 |       setProgress(null);

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27628:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25547:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:16708:7)
      at setError (hooks/games/use-game-progress.ts:40:7)
      at Object.<anonymous> (tests/unit/hooks/useGameProgress.spec.ts:56:5)

    console.error
      Warning: An update to TestComponent inside a test was not wrapped in act(...).
      
      When testing, code that causes React state updates should be wrapped into act(...):
      
      act(() => {
        /* fire events that update state */
      });
      /* assert on the output */
      
      This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
          at TestComponent (C:\projects\aprendeai-app\frontend\node_modules\@testing-library\react\dist\pure.js:328:5)

      43 |       setProgress(null);
      44 |     } finally {
    > 45 |       setLoading(false);
         |       ^
      46 |     }
      47 |   }, [userId]);
      48 |

      at printWarning (node_modules/react-dom/cjs/react-dom.development.js:86:30)
      at error (node_modules/react-dom/cjs/react-dom.development.js:60:7)
      at warnIfUpdatesNotWrappedWithActDEV (node_modules/react-dom/cjs/react-dom.development.js:27628:9)
      at scheduleUpdateOnFiber (node_modules/react-dom/cjs/react-dom.development.js:25547:5)
      at dispatchSetState (node_modules/react-dom/cjs/react-dom.development.js:16708:7)
      at setLoading (hooks/games/use-game-progress.ts:45:7)
      at Object.<anonymous> (tests/unit/hooks/useGameProgress.spec.ts:56:5)

PASS tests/unit/hooks/use-cornell-highlights.spec.tsx
PASS tests/unit/hooks/use-groups.spec.tsx
FAIL tests/integration/CornellReader.integration.spec.tsx
  ‚óè Console

    console.error
      Error: Uncaught [ReferenceError: Cannot access 'filteredItems' before initialization]
          at reportException (C:\projects\aprendeai-app\frontend\node_modules\jsdom\lib\jsdom\living\helpers\runtime-script-errors.js:66:24)
          at innerInvokeEventListeners (C:\projects\aprendeai-app\frontend\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:353:9)
          at invokeEventListeners (C:\projects\aprendeai-app\frontend\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:286:3)
          at HTMLUnknownElementImpl._dispatch (C:\projects\aprendeai-app\frontend\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:233:9)
          at HTMLUnknownElementImpl.dispatchEvent (C:\projects\aprendeai-app\frontend\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:104:17)
          at HTMLUnknownElement.dispatchEvent (C:\projects\aprendeai-app\frontend\node_modules\jsdom\lib\jsdom\living\generated\EventTarget.js:241:34)
          at Object.invokeGuardedCallbackDev (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:4213:16)
          at invokeGuardedCallback (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:4277:31)
          at beginWork$1 (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:27490:7)
          at performUnitOfWork (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:26599:12)
          at workLoopSync (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:26505:5)
          at renderRootSync (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:26473:7)
          at performSyncWorkOnRoot (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:26124:20)
          at flushSyncCallbacks (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:12042:22)
          at C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:25690:13
          at invokeTheCallbackFunction (C:\projects\aprendeai-app\frontend\node_modules\jsdom\lib\jsdom\living\generated\Function.js:19:26)
          at C:\projects\aprendeai-app\frontend\node_modules\jsdom\lib\jsdom\browser\Window.js:613:9
          at node:internal/process/task_queues:151:7
          at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
          at AsyncResource.runMicrotask (node:internal/process/task_queues:148:8)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at listOnTimeout (node:internal/timers:549:9)
          at processTimers (node:internal/timers:523:7) {
        detail: ReferenceError: Cannot access 'filteredItems' before initialization
            at filteredItems (C:\projects\aprendeai-app\frontend\components\cornell\ModernCornellLayout.tsx:107:6)
            at renderWithHooks (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:15486:18)
            at mountIndeterminateComponent (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:20103:13)
            at beginWork (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:21626:16)
            at HTMLUnknownElement.callCallback (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:4164:14)
            at HTMLUnknownElement.callTheUserObjectsOperation (C:\projects\aprendeai-app\frontend\node_modules\jsdom\lib\jsdom\living\generated\EventListener.js:26:30)
            at innerInvokeEventListeners (C:\projects\aprendeai-app\frontend\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:350:25)
            at invokeEventListeners (C:\projects\aprendeai-app\frontend\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:286:3)
            at HTMLUnknownElementImpl._dispatch (C:\projects\aprendeai-app\frontend\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:233:9)
            at HTMLUnknownElementImpl.dispatchEvent (C:\projects\aprendeai-app\frontend\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:104:17)
            at HTMLUnknownElement.dispatchEvent (C:\projects\aprendeai-app\frontend\node_modules\jsdom\lib\jsdom\living\generated\EventTarget.js:241:34)
            at Object.invokeGuardedCallbackDev (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:4213:16)
            at invokeGuardedCallback (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:4277:31)
            at beginWork$1 (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:27490:7)
            at performUnitOfWork (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:26599:12)
            at workLoopSync (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:26505:5)
            at renderRootSync (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:26473:7)
            at performSyncWorkOnRoot (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:26124:20)
            at flushSyncCallbacks (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:12042:22)
            at C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:25690:13
            at invokeTheCallbackFunction (C:\projects\aprendeai-app\frontend\node_modules\jsdom\lib\jsdom\living\generated\Function.js:19:26)
            at C:\projects\aprendeai-app\frontend\node_modules\jsdom\lib\jsdom\browser\Window.js:613:9
            at node:internal/process/task_queues:151:7
            at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
            at AsyncResource.runMicrotask (node:internal/process/task_queues:148:8)
            at runNextTicks (node:internal/process/task_queues:65:5)
            at listOnTimeout (node:internal/timers:549:9)
            at processTimers (node:internal/timers:523:7),
        type: 'unhandled exception'
      }

      at VirtualConsole.<anonymous> (node_modules/@jest/environment-jsdom-abstract/build/index.js:87:23)
      at reportException (node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:70:28)
      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
      at HTMLUnknownElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
      at HTMLUnknownElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
      at HTMLUnknownElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
      at Object.invokeGuardedCallbackDev (node_modules/react-dom/cjs/react-dom.development.js:4213:16)
      at invokeGuardedCallback (node_modules/react-dom/cjs/react-dom.development.js:4277:31)
      at beginWork$1 (node_modules/react-dom/cjs/react-dom.development.js:27490:7)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom.development.js:26599:12)
      at workLoopSync (node_modules/react-dom/cjs/react-dom.development.js:26505:5)
      at renderRootSync (node_modules/react-dom/cjs/react-dom.development.js:26473:7)
      at performSyncWorkOnRoot (node_modules/react-dom/cjs/react-dom.development.js:26124:20)
      at flushSyncCallbacks (node_modules/react-dom/cjs/react-dom.development.js:12042:22)
      at node_modules/react-dom/cjs/react-dom.development.js:25690:13
      at invokeTheCallbackFunction (node_modules/jsdom/lib/jsdom/living/generated/Function.js:19:26)
      at node_modules/jsdom/lib/jsdom/browser/Window.js:613:9

    console.error
      Error: Uncaught [ReferenceError: Cannot access 'filteredItems' before initialization]
          at reportException (C:\projects\aprendeai-app\frontend\node_modules\jsdom\lib\jsdom\living\helpers\runtime-script-errors.js:66:24)
          at innerInvokeEventListeners (C:\projects\aprendeai-app\frontend\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:353:9)
          at invokeEventListeners (C:\projects\aprendeai-app\frontend\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:286:3)
          at HTMLUnknownElementImpl._dispatch (C:\projects\aprendeai-app\frontend\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:233:9)
          at HTMLUnknownElementImpl.dispatchEvent (C:\projects\aprendeai-app\frontend\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:104:17)
          at HTMLUnknownElement.dispatchEvent (C:\projects\aprendeai-app\frontend\node_modules\jsdom\lib\jsdom\living\generated\EventTarget.js:241:34)
          at Object.invokeGuardedCallbackDev (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:4213:16)
          at invokeGuardedCallback (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:4277:31)
          at beginWork$1 (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:27490:7)
          at performUnitOfWork (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:26599:12)
          at workLoopSync (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:26505:5)
          at renderRootSync (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:26473:7)
          at recoverFromConcurrentError (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:25889:20)
          at performSyncWorkOnRoot (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:26135:20)
          at flushSyncCallbacks (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:12042:22)
          at C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:25690:13
          at invokeTheCallbackFunction (C:\projects\aprendeai-app\frontend\node_modules\jsdom\lib\jsdom\living\generated\Function.js:19:26)
          at C:\projects\aprendeai-app\frontend\node_modules\jsdom\lib\jsdom\browser\Window.js:613:9
          at node:internal/process/task_queues:151:7
          at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
          at AsyncResource.runMicrotask (node:internal/process/task_queues:148:8)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at listOnTimeout (node:internal/timers:549:9)
          at processTimers (node:internal/timers:523:7) {
        detail: ReferenceError: Cannot access 'filteredItems' before initialization
            at filteredItems (C:\projects\aprendeai-app\frontend\components\cornell\ModernCornellLayout.tsx:107:6)
            at renderWithHooks (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:15486:18)
            at mountIndeterminateComponent (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:20103:13)
            at beginWork (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:21626:16)
            at HTMLUnknownElement.callCallback (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:4164:14)
            at HTMLUnknownElement.callTheUserObjectsOperation (C:\projects\aprendeai-app\frontend\node_modules\jsdom\lib\jsdom\living\generated\EventListener.js:26:30)
            at innerInvokeEventListeners (C:\projects\aprendeai-app\frontend\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:350:25)
            at invokeEventListeners (C:\projects\aprendeai-app\frontend\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:286:3)
            at HTMLUnknownElementImpl._dispatch (C:\projects\aprendeai-app\frontend\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:233:9)
            at HTMLUnknownElementImpl.dispatchEvent (C:\projects\aprendeai-app\frontend\node_modules\jsdom\lib\jsdom\living\events\EventTarget-impl.js:104:17)
            at HTMLUnknownElement.dispatchEvent (C:\projects\aprendeai-app\frontend\node_modules\jsdom\lib\jsdom\living\generated\EventTarget.js:241:34)
            at Object.invokeGuardedCallbackDev (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:4213:16)
            at invokeGuardedCallback (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:4277:31)
            at beginWork$1 (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:27490:7)
            at performUnitOfWork (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:26599:12)
            at workLoopSync (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:26505:5)
            at renderRootSync (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:26473:7)
            at recoverFromConcurrentError (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:25889:20)
            at performSyncWorkOnRoot (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:26135:20)
            at flushSyncCallbacks (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:12042:22)
            at C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:25690:13
            at invokeTheCallbackFunction (C:\projects\aprendeai-app\frontend\node_modules\jsdom\lib\jsdom\living\generated\Function.js:19:26)
            at C:\projects\aprendeai-app\frontend\node_modules\jsdom\lib\jsdom\browser\Window.js:613:9
            at node:internal/process/task_queues:151:7
            at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
            at AsyncResource.runMicrotask (node:internal/process/task_queues:148:8)
            at runNextTicks (node:internal/process/task_queues:65:5)
            at listOnTimeout (node:internal/timers:549:9)
            at processTimers (node:internal/timers:523:7),
        type: 'unhandled exception'
      }

      at VirtualConsole.<anonymous> (node_modules/@jest/environment-jsdom-abstract/build/index.js:87:23)
      at reportException (node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:70:28)
      at innerInvokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
      at invokeEventListeners (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
      at HTMLUnknownElementImpl._dispatch (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
      at HTMLUnknownElementImpl.dispatchEvent (node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
      at HTMLUnknownElement.dispatchEvent (node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
      at Object.invokeGuardedCallbackDev (node_modules/react-dom/cjs/react-dom.development.js:4213:16)
      at invokeGuardedCallback (node_modules/react-dom/cjs/react-dom.development.js:4277:31)
      at beginWork$1 (node_modules/react-dom/cjs/react-dom.development.js:27490:7)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom.development.js:26599:12)
      at workLoopSync (node_modules/react-dom/cjs/react-dom.development.js:26505:5)
      at renderRootSync (node_modules/react-dom/cjs/react-dom.development.js:26473:7)
      at recoverFromConcurrentError (node_modules/react-dom/cjs/react-dom.development.js:25889:20)
      at performSyncWorkOnRoot (node_modules/react-dom/cjs/react-dom.development.js:26135:20)
      at flushSyncCallbacks (node_modules/react-dom/cjs/react-dom.development.js:12042:22)
      at node_modules/react-dom/cjs/react-dom.development.js:25690:13
      at invokeTheCallbackFunction (node_modules/jsdom/lib/jsdom/living/generated/Function.js:19:26)
      at node_modules/jsdom/lib/jsdom/browser/Window.js:613:9

    console.error
      The above error occurred in the <ModernCornellLayout> component:
      
          at title (C:\projects\aprendeai-app\frontend\components\cornell\ModernCornellLayout.tsx:68:3)
          at ErrorBoundary (C:\projects\aprendeai-app\frontend\components\ErrorBoundary.tsx:17:5)
          at params (C:\projects\aprendeai-app\frontend\app\reader\[contentId]\page.tsx:38:38)
          at QueryClientProvider (C:\projects\aprendeai-app\frontend\node_modules\@tanstack\react-query\src\QueryClientProvider.tsx:30:3)
          at children (C:\projects\aprendeai-app\frontend\tests\integration\CornellReader.integration.spec.tsx:62:13)
      
      React will try to recreate this component tree from scratch using the error boundary you provided, ErrorBoundary.

      at logCapturedError (node_modules/react-dom/cjs/react-dom.development.js:18704:23)
      at ErrorBoundary.callback (node_modules/react-dom/cjs/react-dom.development.js:18772:7)
      at callCallback (node_modules/react-dom/cjs/react-dom.development.js:15036:12)
      at commitUpdateQueue (node_modules/react-dom/cjs/react-dom.development.js:15057:9)
      at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom.development.js:23403:13)
      at commitLayoutMountEffects_complete (node_modules/react-dom/cjs/react-dom.development.js:24727:9)
      at commitLayoutEffects_begin (node_modules/react-dom/cjs/react-dom.development.js:24713:7)
      at commitLayoutEffects (node_modules/react-dom/cjs/react-dom.development.js:24651:3)
      at commitRootImpl (node_modules/react-dom/cjs/react-dom.development.js:26862:5)
      at commitRoot (node_modules/react-dom/cjs/react-dom.development.js:26721:5)
      at performSyncWorkOnRoot (node_modules/react-dom/cjs/react-dom.development.js:26156:3)
      at flushSyncCallbacks (node_modules/react-dom/cjs/react-dom.development.js:12042:22)
      at node_modules/react-dom/cjs/react-dom.development.js:25690:13
      at invokeTheCallbackFunction (node_modules/jsdom/lib/jsdom/living/generated/Function.js:19:26)
      at node_modules/jsdom/lib/jsdom/browser/Window.js:613:9

    console.error
      [ErrorBoundary] =====================================

      24 |
      25 |   componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {
    > 26 |     console.error('[ErrorBoundary] =====================================');
         |             ^
      27 |     console.error('[ErrorBoundary] Caught error:', error);
      28 |     console.error('[ErrorBoundary] Component stack:', errorInfo.componentStack);
      29 |     console.error('[ErrorBoundary] =====================================');

      at ErrorBoundary.error [as componentDidCatch] (components/ErrorBoundary.tsx:26:13)
      at ErrorBoundary.callback (node_modules/react-dom/cjs/react-dom.development.js:18785:12)
      at callCallback (node_modules/react-dom/cjs/react-dom.development.js:15036:12)
      at commitUpdateQueue (node_modules/react-dom/cjs/react-dom.development.js:15057:9)
      at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom.development.js:23403:13)
      at commitLayoutMountEffects_complete (node_modules/react-dom/cjs/react-dom.development.js:24727:9)
      at commitLayoutEffects_begin (node_modules/react-dom/cjs/react-dom.development.js:24713:7)
      at commitLayoutEffects (node_modules/react-dom/cjs/react-dom.development.js:24651:3)
      at commitRootImpl (node_modules/react-dom/cjs/react-dom.development.js:26862:5)
      at commitRoot (node_modules/react-dom/cjs/react-dom.development.js:26721:5)
      at performSyncWorkOnRoot (node_modules/react-dom/cjs/react-dom.development.js:26156:3)
      at flushSyncCallbacks (node_modules/react-dom/cjs/react-dom.development.js:12042:22)
      at node_modules/react-dom/cjs/react-dom.development.js:25690:13
      at invokeTheCallbackFunction (node_modules/jsdom/lib/jsdom/living/generated/Function.js:19:26)
      at node_modules/jsdom/lib/jsdom/browser/Window.js:613:9

    console.error
      [ErrorBoundary] Caught error: ReferenceError: Cannot access 'filteredItems' before initialization
          at filteredItems (C:\projects\aprendeai-app\frontend\components\cornell\ModernCornellLayout.tsx:107:6)
          at renderWithHooks (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:15486:18)
          at mountIndeterminateComponent (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:20103:13)
          at beginWork (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:21626:16)
          at beginWork$1 (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:27465:14)
          at performUnitOfWork (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:26599:12)
          at workLoopSync (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:26505:5)
          at renderRootSync (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:26473:7)
          at recoverFromConcurrentError (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:25889:20)
          at performSyncWorkOnRoot (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:26135:20)
          at flushSyncCallbacks (C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:12042:22)
          at C:\projects\aprendeai-app\frontend\node_modules\react-dom\cjs\react-dom.development.js:25690:13
          at invokeTheCallbackFunction (C:\projects\aprendeai-app\frontend\node_modules\jsdom\lib\jsdom\living\generated\Function.js:19:26)
          at C:\projects\aprendeai-app\frontend\node_modules\jsdom\lib\jsdom\browser\Window.js:613:9
          at node:internal/process/task_queues:151:7
          at AsyncResource.runInAsyncScope (node:async_hooks:214:14)
          at AsyncResource.runMicrotask (node:internal/process/task_queues:148:8)
          at runNextTicks (node:internal/process/task_queues:65:5)
          at listOnTimeout (node:internal/timers:549:9)
          at processTimers (node:internal/timers:523:7)

      25 |   componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {
      26 |     console.error('[ErrorBoundary] =====================================');
    > 27 |     console.error('[ErrorBoundary] Caught error:', error);
         |             ^
      28 |     console.error('[ErrorBoundary] Component stack:', errorInfo.componentStack);
      29 |     console.error('[ErrorBoundary] =====================================');
      30 |     this.setState({ errorInfo });

      at ErrorBoundary.error [as componentDidCatch] (components/ErrorBoundary.tsx:27:13)
      at ErrorBoundary.callback (node_modules/react-dom/cjs/react-dom.development.js:18785:12)
      at callCallback (node_modules/react-dom/cjs/react-dom.development.js:15036:12)
      at commitUpdateQueue (node_modules/react-dom/cjs/react-dom.development.js:15057:9)
      at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom.development.js:23403:13)
      at commitLayoutMountEffects_complete (node_modules/react-dom/cjs/react-dom.development.js:24727:9)
      at commitLayoutEffects_begin (node_modules/react-dom/cjs/react-dom.development.js:24713:7)
      at commitLayoutEffects (node_modules/react-dom/cjs/react-dom.development.js:24651:3)
      at commitRootImpl (node_modules/react-dom/cjs/react-dom.development.js:26862:5)
      at commitRoot (node_modules/react-dom/cjs/react-dom.development.js:26721:5)
      at performSyncWorkOnRoot (node_modules/react-dom/cjs/react-dom.development.js:26156:3)
      at flushSyncCallbacks (node_modules/react-dom/cjs/react-dom.development.js:12042:22)
      at node_modules/react-dom/cjs/react-dom.development.js:25690:13
      at invokeTheCallbackFunction (node_modules/jsdom/lib/jsdom/living/generated/Function.js:19:26)
      at node_modules/jsdom/lib/jsdom/browser/Window.js:613:9

    console.error
      [ErrorBoundary] Component stack: 
          at title (C:\projects\aprendeai-app\frontend\components\cornell\ModernCornellLayout.tsx:68:3)
          at ErrorBoundary (C:\projects\aprendeai-app\frontend\components\ErrorBoundary.tsx:17:5)
          at params (C:\projects\aprendeai-app\frontend\app\reader\[contentId]\page.tsx:38:38)
          at QueryClientProvider (C:\projects\aprendeai-app\frontend\node_modules\@tanstack\react-query\src\QueryClientProvider.tsx:30:3)
          at children (C:\projects\aprendeai-app\frontend\tests\integration\CornellReader.integration.spec.tsx:62:13)

      26 |     console.error('[ErrorBoundary] =====================================');
      27 |     console.error('[ErrorBoundary] Caught error:', error);
    > 28 |     console.error('[ErrorBoundary] Component stack:', errorInfo.componentStack);
         |             ^
      29 |     console.error('[ErrorBoundary] =====================================');
      30 |     this.setState({ errorInfo });
      31 |   }

      at ErrorBoundary.error [as componentDidCatch] (components/ErrorBoundary.tsx:28:13)
      at ErrorBoundary.callback (node_modules/react-dom/cjs/react-dom.development.js:18785:12)
      at callCallback (node_modules/react-dom/cjs/react-dom.development.js:15036:12)
      at commitUpdateQueue (node_modules/react-dom/cjs/react-dom.development.js:15057:9)
      at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom.development.js:23403:13)
      at commitLayoutMountEffects_complete (node_modules/react-dom/cjs/react-dom.development.js:24727:9)
      at commitLayoutEffects_begin (node_modules/react-dom/cjs/react-dom.development.js:24713:7)
      at commitLayoutEffects (node_modules/react-dom/cjs/react-dom.development.js:24651:3)
      at commitRootImpl (node_modules/react-dom/cjs/react-dom.development.js:26862:5)
      at commitRoot (node_modules/react-dom/cjs/react-dom.development.js:26721:5)
      at performSyncWorkOnRoot (node_modules/react-dom/cjs/react-dom.development.js:26156:3)
      at flushSyncCallbacks (node_modules/react-dom/cjs/react-dom.development.js:12042:22)
      at node_modules/react-dom/cjs/react-dom.development.js:25690:13
      at invokeTheCallbackFunction (node_modules/jsdom/lib/jsdom/living/generated/Function.js:19:26)
      at node_modules/jsdom/lib/jsdom/browser/Window.js:613:9

    console.error
      [ErrorBoundary] =====================================

      27 |     console.error('[ErrorBoundary] Caught error:', error);
      28 |     console.error('[ErrorBoundary] Component stack:', errorInfo.componentStack);
    > 29 |     console.error('[ErrorBoundary] =====================================');
         |             ^
      30 |     this.setState({ errorInfo });
      31 |   }
      32 |

      at ErrorBoundary.error [as componentDidCatch] (components/ErrorBoundary.tsx:29:13)
      at ErrorBoundary.callback (node_modules/react-dom/cjs/react-dom.development.js:18785:12)
      at callCallback (node_modules/react-dom/cjs/react-dom.development.js:15036:12)
      at commitUpdateQueue (node_modules/react-dom/cjs/react-dom.development.js:15057:9)
      at commitLayoutEffectOnFiber (node_modules/react-dom/cjs/react-dom.development.js:23403:13)
      at commitLayoutMountEffects_complete (node_modules/react-dom/cjs/react-dom.development.js:24727:9)
      at commitLayoutEffects_begin (node_modules/react-dom/cjs/react-dom.development.js:24713:7)
      at commitLayoutEffects (node_modules/react-dom/cjs/react-dom.development.js:24651:3)
      at commitRootImpl (node_modules/react-dom/cjs/react-dom.development.js:26862:5)
      at commitRoot (node_modules/react-dom/cjs/react-dom.development.js:26721:5)
      at performSyncWorkOnRoot (node_modules/react-dom/cjs/react-dom.development.js:26156:3)
      at flushSyncCallbacks (node_modules/react-dom/cjs/react-dom.development.js:12042:22)
      at node_modules/react-dom/cjs/react-dom.development.js:25690:13
      at invokeTheCallbackFunction (node_modules/jsdom/lib/jsdom/living/generated/Function.js:19:26)
      at node_modules/jsdom/lib/jsdom/browser/Window.js:613:9

  ‚óè Cornell Reader Page Integration ‚Ä∫ should render content and cornell layout when data loads

    Unable to find an element with the text: Integration Test Doc. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    <body>
      <div>
        <div
          class="flex items-center justify-center min-h-screen bg-gray-50"
        >
          <div
            class="max-w-md p-8 bg-white rounded-lg shadow-lg"
          >
            <h2
              class="text-2xl font-bold text-red-600 mb-4"
            >
              Something went wrong
            </h2>
            <p
              class="text-gray-700 mb-4"
            >
              An error occurred while rendering this page.
            </p>
            <details
              class="mb-4"
            >
              <summary
                class="cursor-pointer text-sm text-gray-600 hover:text-gray-900"
              >
                Error details
              </summary>
              <pre
                class="mt-2 p-4 bg-gray-100 rounded text-xs overflow-auto max-h-60"
              >
                ReferenceError: Cannot access 'filteredItems' before initialization
                

    Component Stack:
                

      66 |
      67 | export function ModernCornellLayout({
    > 68 |   title,
         |   ^
      69 |   mode,
      70 |   onModeToggle,
      71 |   saveStatus,

      at title (components/cornell/ModernCornellLayout.tsx:68:3)
      at ErrorBoundary (components/ErrorBoundary.tsx:17:5)
      at params (app/reader/[contentId]/page.tsx:38:38)
      at QueryClientProvider (node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:30:3)
      at children (tests/integration/CornellReader.integration.spec.tsx:62:13)
                </pre>
              </details>
              <button
                class="w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"
              >
                Reload Page
              </button>
            </div>
          </div>
        </div>
      </body>
      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33
      at Object.findByText (tests/integration/CornellReader.integration.spec.tsx:124:25)

Summary of all failing tests
FAIL tests/unit/services/storage.service.spec.ts
  ‚óè StorageService ‚Ä∫ keys() ‚Ä∫ should return all keys

    expect(received).toContain(expected) // indexOf

    Expected value: "authToken"
    Received array: ["getItem", "setItem", "removeItem", "clear", "length", "key"]

      148 |       
      149 |       const keys = storageService.keys();
    > 150 |       expect(keys).toContain('authToken');
          |                    ^
      151 |       expect(keys).toContain('userId');
      152 |       expect(keys.length).toBe(2);
      153 |     });

      at Object.toContain (tests/unit/services/storage.service.spec.ts:150:20)

  ‚óè StorageService ‚Ä∫ keys() ‚Ä∫ should return empty array when storage is empty

    expect(received).toEqual(expected) // deep equality

    - Expected  - 1
    + Received  + 8

    - Array []
    + Array [
    +   "getItem",
    +   "setItem",
    +   "removeItem",
    +   "clear",
    +   "length",
    +   "key",
    + ]

      155 |     it('should return empty array when storage is empty', () => {
      156 |       const keys = storageService.keys();
    > 157 |       expect(keys).toEqual([]);
          |                    ^
      158 |     });
      159 |   });
      160 |

      at Object.toEqual (tests/unit/services/storage.service.spec.ts:157:20)

FAIL tests/unit/components/ui/Skeleton.spec.tsx
  ‚óè Skeleton ‚Ä∫ Rendering ‚Ä∫ should have rounded class

    expect(element).toHaveClass("rounded-md")

    Expected the element to have class:
      rounded-md
    Received:
      animate-pulse bg-gray-200 rounded

      27 |       const { container } = render(<Skeleton />);
      28 |       const skeleton = container.firstChild as HTMLElement;
    > 29 |       expect(skeleton).toHaveClass('rounded-md');
         |                        ^
      30 |     });
      31 |
      32 |     it('should have background color class', () => {

      at Object.toHaveClass (tests/unit/components/ui/Skeleton.spec.tsx:29:24)

  ‚óè Skeleton ‚Ä∫ Rendering ‚Ä∫ should have background color class

    expect(element).toHaveClass("bg-muted")

    Expected the element to have class:
      bg-muted
    Received:
      animate-pulse bg-gray-200 rounded

      33 |       const { container } = render(<Skeleton />);
      34 |       const skeleton = container.firstChild as HTMLElement;
    > 35 |       expect(skeleton).toHaveClass('bg-muted');
         |                        ^
      36 |     });
      37 |   });
      38 |

      at Object.toHaveClass (tests/unit/components/ui/Skeleton.spec.tsx:35:24)

FAIL tests/unit/hooks/use-content.spec.ts
  ‚óè Test suite failed to run


      x Expected '>', got 'client'
        ,-[C:\projects\aprendeai-app\frontend\tests\unit\hooks\use-content.spec.ts:31:1]
     31 |   });
     32 | 
     33 |   const Wrapper = ({ children }: { children: React.ReactNode }) => (
     34 |     <QueryClientProvider client={queryClient}>{children}</QueryClientProvider>
        :                          ^^^^^^
     35 |   );
     36 | 
     36 |   return Wrapper;
        `----


    Caused by:
        Syntax Error

      at Object.transformSync (node_modules/next/src/build/swc/index.ts:1434:25)
      at transformSync (node_modules/next/src/build/swc/index.ts:1551:19)
      at Object.process (node_modules/next/src/build/swc/jest-transformer.ts:104:25)
      at ScriptTransformer.transformSource (node_modules/@jest/transform/build/index.js:422:31)
      at ScriptTransformer._transformAndBuildScript (node_modules/@jest/transform/build/index.js:519:40)
      at ScriptTransformer.transform (node_modules/@jest/transform/build/index.js:558:19)

FAIL tests/integration/CornellReader.integration.spec.tsx
  ‚óè Cornell Reader Page Integration ‚Ä∫ should render content and cornell layout when data loads

    Unable to find an element with the text: Integration Test Doc. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

    Ignored nodes: comments, script, style
    <body>
      <div>
        <div
          class="flex items-center justify-center min-h-screen bg-gray-50"
        >
          <div
            class="max-w-md p-8 bg-white rounded-lg shadow-lg"
          >
            <h2
              class="text-2xl font-bold text-red-600 mb-4"
            >
              Something went wrong
            </h2>
            <p
              class="text-gray-700 mb-4"
            >
              An error occurred while rendering this page.
            </p>
            <details
              class="mb-4"
            >
              <summary
                class="cursor-pointer text-sm text-gray-600 hover:text-gray-900"
              >
                Error details
              </summary>
              <pre
                class="mt-2 p-4 bg-gray-100 rounded text-xs overflow-auto max-h-60"
              >
                ReferenceError: Cannot access 'filteredItems' before initialization
                

    Component Stack:
                

      66 |
      67 | export function ModernCornellLayout({
    > 68 |   title,
         |   ^
      69 |   mode,
      70 |   onModeToggle,
      71 |   saveStatus,

      at title (components/cornell/ModernCornellLayout.tsx:68:3)
      at ErrorBoundary (components/ErrorBoundary.tsx:17:5)
      at params (app/reader/[contentId]/page.tsx:38:38)
      at QueryClientProvider (node_modules/@tanstack/react-query/src/QueryClientProvider.tsx:30:3)
      at children (tests/integration/CornellReader.integration.spec.tsx:62:13)
                </pre>
              </details>
              <button
                class="w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"
              >
                Reload Page
              </button>
            </div>
          </div>
        </div>
      </body>
      at waitForWrapper (node_modules/@testing-library/dom/dist/wait-for.js:163:27)
      at node_modules/@testing-library/dom/dist/query-helpers.js:86:33
      at Object.findByText (tests/integration/CornellReader.integration.spec.tsx:124:25)


Test Suites: 4 failed, 24 passed, 28 total
Tests:       5 failed, 2 skipped, 208 passed, 215 total
Snapshots:   0 total
Time:        5.07 s
Ran all test suites.
