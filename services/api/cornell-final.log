
> api@0.0.1 test:integration
> jest --config ./test/jest-integration.config.js --testPathPattern=cornell.spec

FAIL test/integration/cornell.spec.ts (5.386 s)
  Cornell Notes Integration Tests
    GET /contents/:id/cornell - Auto-create
      × should create empty Cornell notes on first GET (1 ms)
      × should return existing Cornell notes on subsequent GET
    PUT /contents/:id/cornell - Save Notes
      × should save main notes
      × should save cue column
      × should save summary text
      × should save all fields together (1 ms)
    Cornell Notes Persistence
      × should persist changes across GET requests
      × should update existing notes without losing data
    Cornell Notes Validation
      × should reject invalid mainNotes format
      × should allow empty cornell notes

  ● Cornell Notes Integration Tests › GET /contents/:id/cornell - Auto-create › should create empty Cornell notes on first GET

    expected 201 "Created", got 409 "Conflict"

      69 |         schoolingLevel: 'ADULT',
      70 |       })
    > 71 |       .expect(201);
         |        ^
      72 |     const loginResponse = await request(app.getHttpServer())
      73 |       .post(apiUrl(ROUTES.AUTH.LOGIN))
      74 |       .send({

      at Object.<anonymous> (integration/cornell.spec.ts:71:8)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:252:14)
      at ../node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../node_modules/supertest/lib/test.js:120:14)

  ● Cornell Notes Integration Tests › GET /contents/:id/cornell - Auto-create › should return existing Cornell notes on subsequent GET

    expected 201 "Created", got 409 "Conflict"

      69 |         schoolingLevel: 'ADULT',
      70 |       })
    > 71 |       .expect(201);
         |        ^
      72 |     const loginResponse = await request(app.getHttpServer())
      73 |       .post(apiUrl(ROUTES.AUTH.LOGIN))
      74 |       .send({

      at Object.<anonymous> (integration/cornell.spec.ts:71:8)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:252:14)
      at ../node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../node_modules/supertest/lib/test.js:120:14)

  ● Cornell Notes Integration Tests › PUT /contents/:id/cornell - Save Notes › should save main notes

    expected 201 "Created", got 409 "Conflict"

      69 |         schoolingLevel: 'ADULT',
      70 |       })
    > 71 |       .expect(201);
         |        ^
      72 |     const loginResponse = await request(app.getHttpServer())
      73 |       .post(apiUrl(ROUTES.AUTH.LOGIN))
      74 |       .send({

      at Object.<anonymous> (integration/cornell.spec.ts:71:8)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:252:14)
      at ../node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../node_modules/supertest/lib/test.js:120:14)

  ● Cornell Notes Integration Tests › PUT /contents/:id/cornell - Save Notes › should save cue column

    expected 201 "Created", got 409 "Conflict"

      69 |         schoolingLevel: 'ADULT',
      70 |       })
    > 71 |       .expect(201);
         |        ^
      72 |     const loginResponse = await request(app.getHttpServer())
      73 |       .post(apiUrl(ROUTES.AUTH.LOGIN))
      74 |       .send({

      at Object.<anonymous> (integration/cornell.spec.ts:71:8)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:252:14)
      at ../node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../node_modules/supertest/lib/test.js:120:14)

  ● Cornell Notes Integration Tests › PUT /contents/:id/cornell - Save Notes › should save summary text

    expected 201 "Created", got 409 "Conflict"

      69 |         schoolingLevel: 'ADULT',
      70 |       })
    > 71 |       .expect(201);
         |        ^
      72 |     const loginResponse = await request(app.getHttpServer())
      73 |       .post(apiUrl(ROUTES.AUTH.LOGIN))
      74 |       .send({

      at Object.<anonymous> (integration/cornell.spec.ts:71:8)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:252:14)
      at ../node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../node_modules/supertest/lib/test.js:120:14)

  ● Cornell Notes Integration Tests › PUT /contents/:id/cornell - Save Notes › should save all fields together

    expected 201 "Created", got 409 "Conflict"

      69 |         schoolingLevel: 'ADULT',
      70 |       })
    > 71 |       .expect(201);
         |        ^
      72 |     const loginResponse = await request(app.getHttpServer())
      73 |       .post(apiUrl(ROUTES.AUTH.LOGIN))
      74 |       .send({

      at Object.<anonymous> (integration/cornell.spec.ts:71:8)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:252:14)
      at ../node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../node_modules/supertest/lib/test.js:120:14)

  ● Cornell Notes Integration Tests › Cornell Notes Persistence › should persist changes across GET requests

    expected 201 "Created", got 409 "Conflict"

      69 |         schoolingLevel: 'ADULT',
      70 |       })
    > 71 |       .expect(201);
         |        ^
      72 |     const loginResponse = await request(app.getHttpServer())
      73 |       .post(apiUrl(ROUTES.AUTH.LOGIN))
      74 |       .send({

      at Object.<anonymous> (integration/cornell.spec.ts:71:8)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:252:14)
      at ../node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../node_modules/supertest/lib/test.js:120:14)

  ● Cornell Notes Integration Tests › Cornell Notes Persistence › should update existing notes without losing data

    expected 201 "Created", got 409 "Conflict"

      69 |         schoolingLevel: 'ADULT',
      70 |       })
    > 71 |       .expect(201);
         |        ^
      72 |     const loginResponse = await request(app.getHttpServer())
      73 |       .post(apiUrl(ROUTES.AUTH.LOGIN))
      74 |       .send({

      at Object.<anonymous> (integration/cornell.spec.ts:71:8)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:252:14)
      at ../node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../node_modules/supertest/lib/test.js:120:14)

  ● Cornell Notes Integration Tests › Cornell Notes Validation › should reject invalid mainNotes format

    expected 201 "Created", got 409 "Conflict"

      69 |         schoolingLevel: 'ADULT',
      70 |       })
    > 71 |       .expect(201);
         |        ^
      72 |     const loginResponse = await request(app.getHttpServer())
      73 |       .post(apiUrl(ROUTES.AUTH.LOGIN))
      74 |       .send({

      at Object.<anonymous> (integration/cornell.spec.ts:71:8)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:252:14)
      at ../node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../node_modules/supertest/lib/test.js:120:14)

  ● Cornell Notes Integration Tests › Cornell Notes Validation › should allow empty cornell notes

    expected 201 "Created", got 409 "Conflict"

      69 |         schoolingLevel: 'ADULT',
      70 |       })
    > 71 |       .expect(201);
         |        ^
      72 |     const loginResponse = await request(app.getHttpServer())
      73 |       .post(apiUrl(ROUTES.AUTH.LOGIN))
      74 |       .send({

      at Object.<anonymous> (integration/cornell.spec.ts:71:8)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:252:14)
      at ../node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../node_modules/supertest/lib/test.js:120:14)

Test Suites: 1 failed, 1 total
Tests:       10 failed, 10 total
Snapshots:   0 total
Time:        5.588 s, estimated 8 s
Ran all test suites matching /cornell.spec/i.
