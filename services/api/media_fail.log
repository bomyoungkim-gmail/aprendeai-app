
> api@0.0.1 test:integration
> jest --config ./test/jest-integration.config.js test/integration/media-content.integration.spec.ts

  console.log
    ‚úÖ Jest setup: BigInt.prototype.toJSON configured

      at Object.<anonymous> (jest.setup.js:14:9)

  console.warn
    ‚ö†Ô∏è  FRONTEND_URL not set, using fallback: http://localhost:3000

    [0m [90m 28 |[39m
     [90m 29 |[39m     [36mif[39m (fallback) {
    [31m[1m>[22m[39m[90m 30 |[39m       console[33m.[39mwarn([32m`‚ö†Ô∏è  ${envVar} not set, using fallback: ${fallback}`[39m)[33m;[39m
     [90m    |[39m               [31m[1m^[22m[39m
     [90m 31 |[39m       [36mreturn[39m fallback[33m;[39m
     [90m 32 |[39m     }
     [90m 33 |[39m[0m

      at requireInProduction (../src/config/urls.config.ts:30:15)
      at Object.<anonymous> (../src/config/urls.config.ts:53:11)
      at Object.<anonymous> (../src/notifications/notifications.gateway.ts:13:1)
      at Object.<anonymous> (../src/queue/queue-consumer.service.ts:3:1)
      at Object.<anonymous> (../src/queue/queue.module.ts:4:1)
      at Object.<anonymous> (../src/app.module.ts:6:1)
      at Object.<anonymous> (integration/media-content.integration.spec.ts:5:1)

FAIL test/integration/media-content.integration.spec.ts (6.132 s)
  Media Content (Integration)
    ContentType Enum - VIDEO/AUDIO
      ‚àö should create VIDEO content with duration (23 ms)
      ‚àö should create AUDIO content with duration (13 ms)
      ‚àö should reject invalid content type (11 ms)
    Duration Field
      ‚àö should accept null duration for non-media content (25 ms)
      ‚àö should update duration field (23 ms)
    File.storageKey Exposure
      ‚àö should expose file.storageKey in GET /content/:id (22 ms)
    Static File Serving
      √ó should serve files from /api/uploads/ (7 ms)

  ‚óè Media Content (Integration) ‚Ä∫ Static File Serving ‚Ä∫ should serve files from /api/uploads/

    expected 200 "OK", got 404 "Not Found"

      232 |       const response = await request(app.getHttpServer())
      233 |         .get("/api/uploads/test.txt")
    > 234 |         .expect(200);
          |          ^
      235 |
      236 |       // Basic check that file serving works
      237 |       expect(response.text).toBeDefined();

      at Object.<anonymous> (integration/media-content.integration.spec.ts:234:10)
      ----
      at Test._assertStatus (../node_modules/supertest/lib/test.js:252:14)
      at ../node_modules/supertest/lib/test.js:308:13
      at Test._assertFunction (../node_modules/supertest/lib/test.js:285:13)
      at Test.assert (../node_modules/supertest/lib/test.js:164:23)
      at Server.localAssert (../node_modules/supertest/lib/test.js:120:14)

Test Suites: 1 failed, 1 total
Tests:       1 failed, 6 passed, 7 total
Snapshots:   0 total
Time:        6.333 s, estimated 9 s
Ran all test suites matching /test\\integration\\media-content.integration.spec.ts/i.
Force exiting Jest: Have you considered using `--detectOpenHandles` to detect async operations that kept running after all tests finished?
