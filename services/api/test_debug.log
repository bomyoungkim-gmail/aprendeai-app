  console.log
    [DEBUG] Prediction: raw=9, clamped=9, features= {
      activityFrequency: 0,
      avgSessionDuration: 0,
      retentionRate: 0.5,
      rehighlightRate: 0
    }

      at DecayPredictorService.predict (src/graph/ml/decay-predictor.service.ts:158:13)

  console.log
    [DEBUG] Prediction: raw=26.9, clamped=26.9, features= {
      activityFrequency: 2,
      avgSessionDuration: 30,
      retentionRate: 0.8,
      rehighlightRate: 0.3
    }

      at DecayPredictorService.predict (src/graph/ml/decay-predictor.service.ts:158:13)

  console.log
    [DEBUG] Prediction: raw=9.65, clamped=9.65, features= {
      activityFrequency: 0.1,
      avgSessionDuration: 5,
      retentionRate: 0.3,
      rehighlightRate: 0.1
    }

      at DecayPredictorService.predict (src/graph/ml/decay-predictor.service.ts:158:13)

  console.log
    [DEBUG] Prediction: raw=16.5, clamped=16.5, features= {
      activityFrequency: 1,
      avgSessionDuration: 0,
      retentionRate: 0.5,
      rehighlightRate: 1
    }

      at DecayPredictorService.predict (src/graph/ml/decay-predictor.service.ts:158:13)

  console.log
    [DEBUG] Prediction: raw=137.33333333333334, clamped=30, features= {
      activityFrequency: 33.333333333333336,
      avgSessionDuration: 120,
      retentionRate: 1,
      rehighlightRate: 1
    }

      at DecayPredictorService.predict (src/graph/ml/decay-predictor.service.ts:158:13)

  console.log
    [DEBUG] Prediction: raw=16.5, clamped=16.5, features= {
      activityFrequency: 1,
      avgSessionDuration: 0,
      retentionRate: 0.5,
      rehighlightRate: 1
    }

      at DecayPredictorService.predict (src/graph/ml/decay-predictor.service.ts:158:13)

  console.log
    [DEBUG] Prediction: raw=16.5, clamped=16.5, features= {
      activityFrequency: 1,
      avgSessionDuration: 0,
      retentionRate: 0.5,
      rehighlightRate: 1
    }

      at DecayPredictorService.predict (src/graph/ml/decay-predictor.service.ts:158:13)

  console.log
    [DEBUG] Prediction: raw=16.5, clamped=16.5, features= {
      activityFrequency: 1,
      avgSessionDuration: 0,
      retentionRate: 0.5,
      rehighlightRate: 1
    }

      at DecayPredictorService.predict (src/graph/ml/decay-predictor.service.ts:158:13)

  console.log
    [DEBUG] Prediction: raw=16.5, clamped=16.5, features= {
      activityFrequency: 1,
      avgSessionDuration: 0,
      retentionRate: 0.5,
      rehighlightRate: 1
    }

      at DecayPredictorService.predict (src/graph/ml/decay-predictor.service.ts:158:13)

  console.log
    [DEBUG] Prediction: raw=16.5, clamped=16.5, features= {
      activityFrequency: 1,
      avgSessionDuration: 0,
      retentionRate: 0.5,
      rehighlightRate: 1
    }

      at DecayPredictorService.predict (src/graph/ml/decay-predictor.service.ts:158:13)

  console.log
    [DEBUG] Prediction: raw=16.5, clamped=16.5, features= {
      activityFrequency: 1,
      avgSessionDuration: 0,
      retentionRate: 0.5,
      rehighlightRate: 1
    }

      at DecayPredictorService.predict (src/graph/ml/decay-predictor.service.ts:158:13)

  console.log
    [DEBUG] Prediction: raw=22.4, clamped=22.4, features= {
      activityFrequency: 1,
      avgSessionDuration: 25,
      retentionRate: 0.8,
      rehighlightRate: 0.2
    }

      at DecayPredictorService.predict (src/graph/ml/decay-predictor.service.ts:158:13)

FAIL src/graph/__tests__/decay-predictor.spec.ts (7.877 s)
  DecayPredictorService
    getPredictedHalfLife
      √ should return default half-life for new user with no data (25 ms)
      √ should predict longer half-life for active user (2 ms)
      √ should predict shorter half-life for inactive user (2 ms)
      × should cache predictions (3 ms)
      √ should respect min/max bounds (2 ms)
    clearCache
      × should clear cache for specific user (2 ms)
      × should clear all caches when no user specified (3 ms)
    getStatistics
      √ should return statistics with features (2 ms)

  ● DecayPredictorService › getPredictedHalfLife › should cache predictions

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 1
    Received number of calls: 3

      130 |
      131 |       // Should only query once
    > 132 |       expect(mockPrismaService.highlights.count).toHaveBeenCalledTimes(1);
          |                                                  ^
      133 |     });
      134 |
      135 |     it('should respect min/max bounds', async () => {

      at Object.<anonymous> (src/graph/__tests__/decay-predictor.spec.ts:132:50)

  ● DecayPredictorService › clearCache › should clear cache for specific user

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 2
    Received number of calls: 6

      173 |
      174 |       // Should query twice (cache was cleared)
    > 175 |       expect(mockPrismaService.highlights.count).toHaveBeenCalledTimes(2);
          |                                                  ^
      176 |     });
      177 |
      178 |     it('should clear all caches when no user specified', async () => {

      at Object.<anonymous> (src/graph/__tests__/decay-predictor.spec.ts:175:50)

  ● DecayPredictorService › clearCache › should clear all caches when no user specified

    expect(jest.fn()).toHaveBeenCalledTimes(expected)

    Expected number of calls: 4
    Received number of calls: 12

      190 |
      191 |       // Should query 4 times total (2 before clear, 2 after)
    > 192 |       expect(mockPrismaService.highlights.count).toHaveBeenCalledTimes(4);
          |                                                  ^
      193 |     });
      194 |   });
      195 |

      at Object.<anonymous> (src/graph/__tests__/decay-predictor.spec.ts:192:50)

Test Suites: 1 failed, 1 total
Tests:       3 failed, 5 passed, 8 total
Snapshots:   0 total
Time:        8.138 s
Ran all test suites matching /src\\graph\\__tests__\\decay-predictor.spec.ts/i.
