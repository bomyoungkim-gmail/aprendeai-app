FAIL src/prompts/prompt-library.service.spec.ts
  PromptLibraryService
    √ should be defined (9 ms)
    getPrompt
      √ should retrieve a prompt by key (1 ms)
      √ should throw error for non-existent prompt (7 ms)
      √ should interpolate variables in nextPrompt (2 ms)
      × should interpolate variables in quickReplies (2 ms)
      √ should preserve placeholders for missing variables (1 ms)
    getPromptsByAudience
      √ should filter prompts by LEARNER audience (1 ms)
      √ should filter prompts by EDUCATOR audience (1 ms)
    getPromptsByPhase
      √ should filter prompts by BOOT phase (1 ms)
      √ should filter prompts by DURING phase (1 ms)

  ● PromptLibraryService › getPrompt › should interpolate variables in quickReplies

    expect(received).toContain(expected) // indexOf

    Expected substring: "História do Brasil"
    Received string:    "Sim, começar"

      41 |         MIN: 20,
      42 |       });
    > 43 |       expect(prompt.quickReplies[0]).toContain('História do Brasil');
         |                                      ^
      44 |       expect(prompt.quickReplies[0]).toContain('20 min');
      45 |     });
      46 |

      at Object.<anonymous> (src/prompts/prompt-library.service.spec.ts:43:38)

Test Suites: 1 failed, 1 total
Tests:       1 failed, 9 passed, 10 total
Snapshots:   0 total
Time:        4.839 s, estimated 5 s
Ran all test suites matching /src\\prompts\\prompt-library.service.spec.ts/i.
